m4_comment([$Id: asr.so,v 1.3 2006/08/24 16:32:32 bostic Exp $])

m4_ref_title(Upgrading m4_db Applications,
    Release 4.0: application-specific recovery,,
    upgrade.4.0/cxx, upgrade.4.0/disk)

m4_p([dnl
If you have created your own logging and recovery routines, you may need
to upgrade them to the m4_db 4.0 release.])

m4_p([dnl
First, you should regenerate your logging, print, read and the other
automatically generated routines, using the dist/gen_rec.awk tool
included in the m4_db distribution.])

m4_p([dnl
Next, compare the template file code generated by the gen_rec.awk tool
against the code generated by the last release in which you built a
template file.  Any changes in the templates should be incorporated into
the recovery routines you have written.])

m4_p([dnl
Third, if your recovery functions refer to m4_ref(DB_TXN_FORWARD_ROLL)
(that is, your code checks for that particular operation code), you
should replace it with DB_REDO(op) which compares the operation code to
both m4_ref(DB_TXN_FORWARD_ROLL) and m4_ref(DB_TXN_APPLY).
(m4_ref(DB_TXN_APPLY) is a potential value for the operation code as of
the 4.0 release.)])

m4_p([dnl
Finally, if you have created your own logging and recovery routines, we
recommend you contact us and ask us to review those routines for you.])

m4_page_footer
