m4_comment([$Id: server.so,v 1.8 2002/06/17 18:38:43 bostic Exp $])

m4_ref_title(RPC Client/Server,
    Server program, @RPC server, rpc/client, rpc/faq)

m4_p([dnl
The m4_db server utility, m4_ref(berkeley_db_svc), handles all the
client application requests.])

m4_p([dnl
Currently, the m4_ref(berkeley_db_svc) utility is single-threaded,
limiting the number of requests that it can handle.  Modifying the
server implementation to run in multithread or multiprocess mode
requires modification of the server code automatically generated by the
rpcgen program.])

m4_p([dnl
There are two different types of timeouts used by m4_ref(berkeley_db_svc).
The first timeout (which can be modified within some constraints by the
client application), is the resource timeout.  When clients use
transactions or cursors, those resources hold locks in m4_db across calls
to the server.  If a client application dies or loses its connection to
the server while holding those resources, it prevents any other client
from acquiring them.  Therefore, it is important to detect that a client
has not used a resource for some period of time and release them.  In the
case of transactions, the server aborts the transaction.  In the case of
cursors, the server closes the cursor.])

m4_p([dnl
The second timeout is an idle timeout.  A client application may remain
idle with an open handle to an environment and a database.  Doing so
simply consumes some memory; it does not hold locks.  However, the m4_db
server may want to eventually reclaim resources if a client dies or
remains disconnected for a long period of time, so there is a separate
idle timeout for open m4_db handles.])

m4_p([dnl
The list of home directories specified to m4_ref(berkeley_db_svc) are
the only ones client applications are allowed to use.  When
m4_ref(berkeley_db_svc) is started, it is given a list of pathnames.
Clients are expected to specify the name of the home directory (defined
as the last component in the directory pathname) as the database
environment they are opening.  In this manner, clients need to know only
the name of their home environment; not its full pathname on the server
machine.  This means, of course, that only one environment of a
particular name is allowed on the server at any given time.])

m4_page_footer
