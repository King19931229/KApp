<!--$Id: faq.html 63573 2008-05-23 21:43:21Z trent.nelson $-->
<!--Copyright (c) 1997,2008 Oracle.  All rights reserved.-->
<!--See the file LICENSE for redistribution information.-->
<html>
<head>
<title>Berkeley DB Reference Guide: Environment FAQ</title>
<meta name="description" content="Berkeley DB: An embedded database programmatic toolkit.">
<meta name="keywords" content="embedded,database,programmatic,toolkit,btree,hash,hashing,transaction,transactions,locking,logging,access method,access methods,Java,C,C++">
</head>
<body bgcolor=white>
<a name="2"><!--meow--></a>
<table width="100%"><tr valign=top>
<td><b><dl><dt>Berkeley DB Reference Guide:<dd>Environment</dl></b></td>
<td align=right><a href="../env/remote.html"><img src="../../images/prev.gif" alt="Prev"></a><a href="../toc.html"><img src="../../images/ref.gif" alt="Ref"></a><a href="../cam/intro.html"><img src="../../images/next.gif" alt="Next"></a>
</td></tr></table>
<p align=center><b>Environment FAQ</b></p>
<ol>
<p><li><b>I'm using multiple processes to access an Berkeley DB database
environment; is there any way to ensure that two processes don't run
transactional recovery at the same time, or that all processes have
exited the database environment so that recovery can be run?</b>
<p>See <a href="../../ref/transapp/fail.html">Handling failure in
Transactional Data Store applications</a> and
<a href="../../ref/transapp/app.html">Architecting Transactional Data Store
applications</a> for a full discussion of this topic.</p>
<p><li><b>How can I associate application information with a <a href="../../api_c/db_class.html">DB</a>
or <a href="../../api_c/env_class.html">DB_ENV</a> handle?</b>
<p>In the C API, the <a href="../../api_c/db_class.html">DB</a> and <a href="../../api_c/env_class.html">DB_ENV</a> structures each contain
an "app_private" field intended to be used to reference
application-specific information.  See the <a href="../../api_c/db_class.html">db_create</a> and
<a href="../../api_c/env_class.html">db_env_create</a> documentation for more information.</p>
<p>In the C++ or Java APIs, the easiest way to associate
application-specific data with a handle is to subclass the <a href="../../api_cxx/db_class.html">Db</a>
or <a href="../../api_cxx/env_class.html">DbEnv</a>, for example subclassing <a href="../../api_cxx/db_class.html">Db</a> to get MyDb.
Objects of type MyDb will still have the Berkeley DB API methods available on
them, and you can put any extra data or methods you want into the MyDb
class.  If you are using "callback" APIs that take <a href="../../api_cxx/db_class.html">Db</a> or
<a href="../../api_cxx/env_class.html">DbEnv</a> arguments (for example, <a href="../../api_cxx/db_set_bt_compare.html">Db::set_bt_compare</a>)
these will always be called with the <a href="../../api_cxx/db_class.html">Db</a> or <a href="../../api_cxx/env_class.html">DbEnv</a>
objects you create.  So if you always use MyDb objects, you will be able
to take the first argument to the callback function and cast it to a
MyDb (in C++, cast it to (MyDb*)).  That will allow you to access your
data members or methods.</p>
</ol>
<table width="100%"><tr><td><br></td><td align=right><a href="../env/remote.html"><img src="../../images/prev.gif" alt="Prev"></a><a href="../toc.html"><img src="../../images/ref.gif" alt="Ref"></a><a href="../cam/intro.html"><img src="../../images/next.gif" alt="Next"></a>
</td></tr></table>
<p><font size=1>Copyright (c) 1996,2008 Oracle.  All rights reserved.</font>
</body>
</html>
